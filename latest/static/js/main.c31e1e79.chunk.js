(this["webpackJsonpopening-prep"]=this["webpackJsonpopening-prep"]||[]).push([[0],{18:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return r}));var n=a(167);function s(){n.a.pageview(window.location.pathname)}function r(e,t,a,s){n.a.event({category:e,action:t,label:a,value:s})}n.a.initialize("UA-159149755-1")},217:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var n=a(163),s=a.n(n),r=a(22),i=a(345);function o(e,t,a){var n=function(e){var t=[{chunk:e.header,index:0,arraySizes:e.arrays.map((function(e){return e.length}))}];return e.arrays.forEach((function(e){Array.prototype.push.apply(t,function(e,t,a){for(var n=[],s=0,r=1;s<e.length;s+=t,r++)n.push({chunk:e.slice(s,s+t),index:a+r});return n}(e,1e3,t.length))})),t}(e),o=[];o.push(p(1)),o.push(p(n.length));var l=n.length,c=!1;n.forEach((function(e){s.a.deflate(new r.Buffer(JSON.stringify(e)),(function(e,n){if(l--,e&&(c=!0),o.push(p(n.byteLength)),o.push(n),l<=0){if(c)return void a("Could not save file");Object(i.saveAs)(new Blob(o,{type:"application/octet-stream"}),t),a(null,"Saved opening tree to file ".concat(t))}}))}))}function l(e,t){var a=new FileReader;a.onload=function(e){var a=e.target.result,n=0,i=c(a.slice(n,n+8));if(n+=8,1===i){var o=c(a.slice(n,n+8));n+=8,o?function(e,t,a,n){var i=t,o=[],l=a,p=!1,h=function(e,t){l--,e&&(console.log(e),p=!0);try{o.push(JSON.parse(t))}catch(a){console.log(a),p=!0}0===l&&(p&&n("Input file seems corrupted",null),n(null,function(e){var t=e.sort((function(e,t){return e.index-t.index})),a=t.slice(1).map((function(e){return e.chunk})).flat(),n=t[0],s=[],r=0;return n.arraySizes.forEach((function(e){s.push(a.slice(r,r+e)),r+=e})),{header:n.chunk,arrays:s}}(o)))};for(;a>0;){var u=c(e.slice(i,i+8));i+=8,s.a.inflate(r.Buffer.from(e,i,u),h),i+=u,a--}}(a,n,o,t):t("Input file not in correct format",null)}else t("File is not an openingtree save file.",null,"Are you loading the correct file?")},a.onerror=function(e){t("Failed to read openingtree file",null,"".concat(e.target.error.name,":").concat(e.target.error.message))},a.readAsArrayBuffer(e)}function c(e){var t=new DataView(e);return 4919!==t.getUint16(0)||49363!==t.getUint16(6)?null:t.getUint32(2)}function p(e){var t=new ArrayBuffer(8),a=new DataView(t);return a.setUint16(0,4919),a.setUint32(2,e>>>0),a.setUint16(6,49363),t}},26:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return h})),a.d(t,"c",(function(){return u}));var n=a(7),s=a(677),r=a(0),i=a.n(r),o=a(47),l=a(3),c=Object(n.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(s.a);function p(e){return i.a.createElement("img",{alt:"step ".concat(e),className:"lowOpacity styledNumbers",src:"/images/styled-".concat(e,".png"),height:24})}function h(e){return Object(o.a)(e,[l.J,l.E,l.D,l.I,l.G,l.H,l.F,l.j,l.k,l.h,l.i])}function u(e){var t=document.getElementById(e);try{return t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),!0}catch(a){return!1}}},3:function(e,t,a){"use strict";a.d(t,"J",(function(){return n})),a.d(t,"E",(function(){return s})),a.d(t,"D",(function(){return r})),a.d(t,"I",(function(){return i})),a.d(t,"F",(function(){return o})),a.d(t,"G",(function(){return l})),a.d(t,"H",(function(){return c})),a.d(t,"j",(function(){return p})),a.d(t,"k",(function(){return h})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"z",(function(){return d})),a.d(t,"x",(function(){return g})),a.d(t,"B",(function(){return f})),a.d(t,"y",(function(){return v})),a.d(t,"C",(function(){return b})),a.d(t,"A",(function(){return E})),a.d(t,"m",(function(){return y})),a.d(t,"n",(function(){return w})),a.d(t,"g",(function(){return k})),a.d(t,"e",(function(){return C})),a.d(t,"c",(function(){return O})),a.d(t,"f",(function(){return N})),a.d(t,"b",(function(){return S})),a.d(t,"d",(function(){return j})),a.d(t,"w",(function(){return P})),a.d(t,"v",(function(){return F})),a.d(t,"u",(function(){return T})),a.d(t,"l",(function(){return x})),a.d(t,"q",(function(){return D})),a.d(t,"t",(function(){return R})),a.d(t,"s",(function(){return M})),a.d(t,"o",(function(){return G})),a.d(t,"p",(function(){return I})),a.d(t,"r",(function(){return A})),a.d(t,"a",(function(){return L}));var n="ultraBullet",s="bullet",r="blitz",i="rapid",o="classical",l="correspondence",c="daily",p="rated",h="selectedTimeframe",u="downloadLimit",m="eloRange",d="lichess",g="chesscom",f="pgnfile",v="eventdb",b="playerdb",E="opntfile",y=2e3,w=3e3,k="loader",C="moves",O="controls",N="navigator",S="chessboard",j="message",P="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",F="white",T="black",x=500,D="feedback@openingtree.com",R="opening_tree",M="vannooz",G="vannooz",I="https://discord.gg/hCwKkN8",A=2,L="visitOld"},341:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return A}));var n=a(37),s=a(95),r=a(14),i=a(20),o=a(19),l=a(29),c=a(30),p=a(31),h=a(0),u=a.n(h),m=a(26),d=a(669),g=a(668),f=a(112),v=a.n(f),b=a(673),E=a(676),y=a(3),w=a(664),k=a(18),C=a(24),O=a(129),N=a(25),S=a(350),j=a(666),P=a(76),F=a(678),T=a(674),x=a(670),D=a(352),R=a(354),M=a(675),G=a(342),I=a.n(G),A=function(t){function a(e){var t;return Object(i.a)(this,a),(t=Object(l.a)(this,Object(c.a)(a).call(this,e))).state={playerColor:t.props.playerColor,isAdvancedFiltersOpen:!1},t.timeframeSteps=t.props.timeframeSteps,Object.assign(t.state,t.props.advancedFilters),t.defaultAdvancedFilters=t.props.advancedFilters,t}return Object(p.a)(a,t),Object(o.a)(a,[{key:"toggleRated",value:function(){"all"===this.state.rated?this.setState({rated:"rated"}):"rated"===this.state.rated?this.setState({rated:"casual"}):this.setState({rated:"all"}),Object(k.a)(y.g,"AdvancedFilterChange","rated")}},{key:"toggleState",value:function(e){var t=this;return function(){var a={};a[e]=!t.state[e],t.setState(a),Object(k.a)(y.g,"ToggleAdvancedFilters",t.state.site)}}},{key:"playerColorChange",value:function(t){var a=t.target.value;this.setState({playerColor:a}),Object(k.a)(y.g,"ColorChange",a),P.b(this.props.site)||e(this.setFilters.bind(this))}},{key:"handleTimeControlChange",value:function(e){this.setState(Object(r.a)({},e.target.name,e.target.checked))}},{key:"handleTimeframeChange",value:function(e,t){this.setState(Object(r.a)({},y.k,t))}},{key:"handleEloRangeChange",value:function(e,t){this.setState(Object(r.a)({},y.i,t))}},{key:"handleDownloadLimitChange",value:function(e,t){this.setState(Object(r.a)({},y.h,t))}},{key:"setFilters",value:function(){this.state.playerColor?(this.setState({colorError:"",isAdvancedFiltersOpen:!1}),this.props.filtersChange(this.state)):this.setState({colorError:"Please select a color"})}},{key:"getSummary",value:function(e){return this.props.playerColor&&!e?u.a.createElement("span",null,Object(m.d)("done"),"Color: ",u.a.createElement("b",null,this.props.playerColor===y.v?"White":"Black"," "),this.areAdvancedFiltersApplied()?u.a.createElement("span",{className:"smallText"},"(Filters applied)"):null):u.a.createElement("span",null,Object(m.d)(3)," Color and filters")}},{key:"componentWillReceiveProps",value:function(e){this.setState(Object(s.a)({},e.advancedFilters,{playerColor:e.playerColor}))}},{key:"areAdvancedFiltersApplied",value:function(){for(var e=0,t=Object.entries(this.defaultAdvancedFilters);e<t.length;e++){var a=Object(n.a)(t[e],2),s=a[0],r=a[1];if(this.props.advancedFilters[s]!==r&&!I()(this.props.advancedFilters[s],r))return!0}return!1}},{key:"render",value:function(){var e=!P.c(this.props.site,this.props.playerName,this.props.selectedNotablePlayer);return u.a.createElement(m.a,{expanded:"filters"===this.props.expandedPanel,TransitionComponent:j.a,TransitionProps:{timeout:y.l},onChange:this.props.handleExpansionChange,disabled:e},u.a.createElement(g.a,{expandIcon:u.a.createElement(v.a,null)},this.getSummary(e)),u.a.createElement(d.a,null,u.a.createElement("div",{className:"pgnloaderfirstsection"},u.a.createElement(F.a,{component:"fieldset",error:!!this.state.colorError},u.a.createElement(T.a,{component:"legend"},"Games where ",u.a.createElement("b",null,this.props.playerName)," is playing as:"),u.a.createElement(x.a,{onChange:this.playerColorChange.bind(this),value:this.state.playerColor},u.a.createElement(D.a,{className:"whitelabel",control:u.a.createElement(R.a,{color:"primary"}),value:y.v,label:this.state.playerColor===y.v?u.a.createElement("b",null,"White"):"White"}),u.a.createElement(D.a,{className:"blacklabel",control:u.a.createElement(R.a,{color:"primary"}),value:y.u,label:this.state.playerColor===y.u?u.a.createElement("b",null,"Black"):"Black"})),u.a.createElement(M.a,null,this.state.colorError))),P.b(this.props.site)?u.a.createElement("div",{className:"pgnloadersection"},u.a.createElement("span",{className:"linkStyle",onClick:this.toggleState("isAdvancedFiltersOpen").bind(this)},"Advanced filters ",u.a.createElement(C.a,{icon:this.state.isAdvancedFiltersOpen?N.b:N.a})),u.a.createElement(w.a,{isOpen:this.state.isAdvancedFiltersOpen},u.a.createElement(S.a,{site:this.props.site,toggleRated:this.toggleRated.bind(this),handleTimeControlChange:this.handleTimeControlChange.bind(this),handleTimeframeChange:this.handleTimeframeChange.bind(this),handleEloRangeChange:this.handleEloRangeChange.bind(this),timeframeSteps:this.timeframeSteps,handleDownloadLimitChange:this.handleDownloadLimitChange.bind(this),advancedFilters:Object(m.b)(this.state)}))):null),u.a.createElement(b.a,null),u.a.createElement(E.a,null,u.a.createElement(O.a,{size:"small",color:"primary",onClick:this.setFilters.bind(this)},"Continue")))}}]),a}(u.a.Component)}).call(this,a(104).setImmediate)},343:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return x}));var n=a(20),s=a(19),r=a(29),i=a(30),o=a(31),l=a(0),c=a.n(l),p=a(3),h=a(18),u=a(24),m=a(129),d=a(344),g=a(25),f=a(220),v=a.n(f),b=a(346),E=a.n(b),y=a(353),w=a(152),k=a.n(w),C=a(76),O=a(679),N=a(219),S=a.n(N),j=a(217),P=a(102),F=a(218),T=a.n(F),x=function(t){function a(e){var t;return Object(n.a)(this,a),(t=Object(r.a)(this,Object(i.a)(a).call(this,e))).unload=function(){t.pgnReader&&t.pgnReader.stopDownloading()},t.state={isGamesSubsectionOpen:!1,exportingInProgress:!1},T.a.mitm="download/download-mitm.html",t.encoder=new TextEncoder,t}return Object(o.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.unload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.unload)}},{key:"importTreeClicked",value:function(){this.setState({exportingInProgress:!0}),Object(h.a)(p.g,"LoadTree",this.props.site,this.props.playerColor===p.v?1:0),e(this.importOpeningTree.bind(this))}},{key:"importOpeningTree",value:function(){var e=this;Object(j.a)(this.props.files[0],(function(t,a,n){if(t)return e.props.showError(t,null,n),void e.setState({exportingInProgress:!1});var s=e.props.importOpeningTreeObject(a);e.setState({exportingInProgress:!1}),s&&e.props.showInfo("Successfuly loaded openingtree")}))}},{key:"exportTreeClicked",value:function(){this.setState({exportingInProgress:!0}),Object(h.a)(p.g,"SaveTree",this.props.site,this.props.playerColor===p.v?1:0),e(this.exportOpeningTree.bind(this))}},{key:"exportOpeningTree",value:function(){var e=this;Object(j.b)(this.props.exportOpeningTreeObject(),C.a(this.props.site,this.props.playerName,this.props.playerColor,null,"tree"),(function(t,a){t?e.props.showError(t):e.props.showInfo(a),e.setState({exportingInProgress:!1})}))}},{key:"abortDownloading",value:function(){this.fileWriter&&(this.fileWriter.close(),this.fileWriter=null)}},{key:"getPgnString",value:function(e){return"".concat(Object.entries(e.headers).map((function(e){return"[".concat(e[0],' "').concat(e[1],'"]')})).join("\n"),"\n                \n").concat(e.moves.map((function(e,t){return"".concat(t%2!==0?"":t/2+1+"."," ").concat(e.move)})).join(" ")," ").concat(e.result,"\n\n\n")}},{key:"downloadResponse",value:function(e,t){var a=this;return this.fileWriter.write(this.encoder.encode(e.map((function(e){return a.getPgnString(e)})).join(""))).then((function(){if(!t)return a.abortDownloading(),!1})),!0}},{key:"readPgn",value:function(e){var t=this;if(e){var a=T.a.createWriteStream(C.a(this.props.site,this.props.playerName,this.props.playerColor,this.props.selectedNotableEvent,"pgn"));this.fileWriter=a.getWriter()}(new d.a).then((function(a){t.pgnReader=a,t.pgnReader.fetchPGNFromSite(t.props.playerName,t.props.playerColor,t.props.site,t.props.selectedNotablePlayer,t.props.selectedNotableEvent,e,t.props.advancedFilters,Object(P.a)(t.props.notify),Object(P.a)(t.props.showError),Object(P.a)(t.stopDownloading.bind(t)),t.props.files,Object(P.a)(t.downloadResponse.bind(t)))}))}},{key:"download",value:function(){this.readPgn(!0),Object(h.a)(p.g,"Download",this.props.site,this.props.playerColor===p.v?1:0)}},{key:"getPlayerName",value:function(){return this.props.site===p.C?this.props.selectedNotablePlayer.name:this.props.playerName}},{key:"componentWillReceiveProps",value:function(e){e.gamesProcessed>0&&this.setState({isGamesSubsectionOpen:!0})}},{key:"load",value:function(){this.props.clear(),this.setState({isGamesSubsectionOpen:!0,loadedSite:this.props.site}),this.props.onChange("playerName",this.props.playerName),this.props.onChange("playerColor",this.props.playerColor),this.readPgn(!1),this.props.setDownloading(!0),Object(h.a)(p.g,"Load",this.props.site,this.props.playerColor===p.v?1:0)}},{key:"stopDownloading",value:function(){this.props.setDownloading(!1)}},{key:"stopDownloadingAction",value:function(){this.stopDownloading(),Object(h.a)(p.g,"StopDownloading",this.props.site)}},{key:"openingTreeLoadActions",value:function(){return c.a.createElement("div",{className:"pgnloadersection"},c.a.createElement(m.a,{onClick:this.importTreeClicked.bind(this),variant:"contained",color:"primary",startIcon:this.state.exportingInProgress?c.a.createElement(S.a,null):c.a.createElement(v.a,null),className:"mainButton",disableElevation:!0,disabled:this.state.exportingInProgress},this.state.exportingInProgress?"Loading from file":"Load openingtree"))}},{key:"regularActions",value:function(){var e=this,t=C.d(this.state.loadedSite,this.props.site,this.props.gamesProcessed,this.props.isDownloading);return c.a.createElement("div",null,c.a.createElement("div",{className:"pgnloadersection"},c.a.createElement(m.a,{onClick:this.load.bind(this),variant:"contained",color:"primary",startIcon:c.a.createElement(E.a,null),className:"mainButton",disableElevation:!0},"Analyze games")),c.a.createElement("div",{className:"pgnloadersection"},c.a.createElement(m.a,{onClick:this.download.bind(this),variant:"contained",color:"default",startIcon:c.a.createElement(v.a,null),className:"mainButton",disableElevation:!0},"Export as PGN")),c.a.createElement("div",{className:"pgnloadersection"},c.a.createElement(O.a,{placement:"top",title:t||"Save a .tree file locally for faster reload later"},c.a.createElement("span",null,c.a.createElement(m.a,{onClick:this.exportTreeClicked.bind(this),variant:"contained",color:"default",startIcon:this.state.exportingInProgress?c.a.createElement(S.a,null):c.a.createElement(k.a,null),className:"mainButton",disableElevation:!0,disabled:!!t||this.state.exportingInProgress},this.state.exportingInProgress?"Saving to file":"Save openingtree")))),this.state.isGamesSubsectionOpen?c.a.createElement("div",null,c.a.createElement("div",{className:"pgnloadersection"},this.props.playerColor?this.props.playerColor===p.v?"White games":"Black games":"Games"," loaded: ".concat(this.props.gamesProcessed," "),this.props.isDownloading?c.a.createElement("span",{className:"stopDownloading"},"[",c.a.createElement("span",{className:"linkStyle",onClick:this.stopDownloadingAction.bind(this)},c.a.createElement("img",{alt:"loading spinner",src:"./spinner.gif",height:"15"}),"stop"),"]"):""),c.a.createElement("div",{onClick:function(){return e.props.switchToMovesTab()},className:"navLinkButton pgnloadersection"},c.a.createElement(u.a,{icon:g.j})," View Moves>>")):"")}},{key:"mainComponent",value:function(){return this.props.site===p.A?this.openingTreeLoadActions():this.regularActions()}},{key:"render",value:function(){return this.props.expandedPanel?c.a.createElement(y.a,{timeout:2*p.l},this.mainComponent()):c.a.createElement(y.a,{in:!0,timeout:3*p.l},this.mainComponent())}}]),a}(c.a.Component)}).call(this,a(104).setImmediate)},344:function(e,t,a){"use strict";(function(e){var n=a(102),s=Object(n.b)(new Worker(e,void 0));t.a=s}).call(this,a(458))},350:function(e,t,a){"use strict";var n=a(20),s=a(19),r=a(29),i=a(30),o=a(31),l=a(678),c=a(671),p=a(751),h=a(0),u=a.n(h),m=a(664),d=a(713),g=a(714),f=a(715),v=a(757),b=a(352),E=a(3),y=a(68),w=a(47),k=[{label:"Fast time controls",selectedTimeControls:[E.E,E.J,E.D],unselectedTimeControls:[E.I,E.F,E.G]},{label:"Slow time controls",selectedTimeControls:[E.I,E.F,E.G],unselectedTimeControls:[E.E,E.J,E.D]},{label:"Reasonable time controls",selectedTimeControls:[E.D,E.I,E.F,E.G],unselectedTimeControls:[E.E,E.J]},{label:"Exclude slow time controls",selectedTimeControls:[E.E,E.J,E.D,E.I],unselectedTimeControls:[E.F,E.G]}];function C(e,t){return t.every((function(t){return e.includes(t)}))}var O=function(e,t){var a=Object(w.d)(e,t,!0),n=Object(w.d)(e,t,!1);return 0===n.length||0===a.length?"All time controls":1===a.length?y.d[a[0]]:1===n.length?"All except ".concat(y.d[n[0]]):2===a.length?"".concat(y.d[a[0]]," and ").concat(y.d[a[1]]):function(e,t){var a=k.filter((function(a){return C(t,a.unselectedTimeControls)&&C(e,a.selectedTimeControls)}));if(a.length)return a[0].label;return e.map((function(e){return y.d[e]})).join(", ")}(a,n)};var N=a(18);a.d(t,"a",(function(){return S}));var S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={currentlyOpenAdvancedFilter:""},a.timeframeMarks=[{value:0,label:"Big bang"},{value:e.timeframeSteps.length-1,label:"Now"}],a.downloadLimitMarks=[{value:0,label:"0"},{value:E.m,label:"No limit"}],a.eloRangeMarks=[{value:0,label:"0"},{value:E.n,label:"No limit"}],a}return Object(o.a)(t,e),Object(s.a)(t,[{key:"setCurrentlyOpenAdvancedFilter",value:function(e){var t=this;return function(){t.state.currentlyOpenAdvancedFilter===e&&(e=""),t.setState({currentlyOpenAdvancedFilter:e}),Object(N.a)(E.g,"AdvancedFilterChange",e)}}},{key:"getFilters",value:function(e){return u.a.createElement("div",null,this.subSectionComponent("Mode","all"===(r=this.props.advancedFilters.rated)?"Rated and casual":"rated"===r?"Rated only":"casual"===r?"Casual only":void 0,this.props.toggleRated),this.subSectionComponent("Time control",O(this.props.site,this.props.advancedFilters),this.setCurrentlyOpenAdvancedFilter("timeControl").bind(this),u.a.createElement(m.a,{isOpen:"timeControl"===this.state.currentlyOpenAdvancedFilter},this.getTimeControlFilters(e,4))),this.subSectionComponent("When played",(n=this.props.advancedFilters[E.k],s=this.props.timeframeSteps,Object(w.c)(n,s).label),this.setCurrentlyOpenAdvancedFilter("whenPlayed").bind(this),u.a.createElement(m.a,{isOpen:"whenPlayed"===this.state.currentlyOpenAdvancedFilter},this.getTimeFrameFilters())),this.subSectionComponent("Opponent elo range",0===(a=this.props.advancedFilters[E.i])[0]&&a[1]===E.n?"All elo ratings":0===a[0]?"Below ".concat(a[1]):a[1]===E.n?"Above ".concat(a[0]):"Between ".concat(a[0]," and ").concat(a[1]),this.setCurrentlyOpenAdvancedFilter("eloRange").bind(this),u.a.createElement(m.a,{isOpen:"eloRange"===this.state.currentlyOpenAdvancedFilter},this.getEloRangeFilters())),this.subSectionComponent("Download limit",(t=this.props.advancedFilters[E.h])>=E.m?"No limit":"".concat(t," games"),this.setCurrentlyOpenAdvancedFilter("downloadLimit").bind(this),u.a.createElement(m.a,{isOpen:"downloadLimit"===this.state.currentlyOpenAdvancedFilter},this.getDownloadLimitFilters())));var t,a,n,s,r}},{key:"getDownloadLimitFilters",value:function(){return u.a.createElement(v.a,{className:"sliderCustom",value:this.props.advancedFilters[E.h],onChange:this.props.handleDownloadLimitChange,valueLabelDisplay:"auto",valueLabelFormat:function(e){return e>=E.m?"All":e},step:100,min:0,marks:this.downloadLimitMarks,max:E.m})}},{key:"getTimeFrameFilters",value:function(){var e=this;return u.a.createElement(v.a,{className:"sliderCustom",value:this.props.advancedFilters[E.k],onChange:this.props.handleTimeframeChange,valueLabelDisplay:"off",valueLabelFormat:function(t){return e.props.timeframeSteps[t].label},step:1,marks:this.timeframeMarks,min:0,max:this.props.timeframeSteps.length-1})}},{key:"getEloRangeFilters",value:function(){return u.a.createElement(v.a,{className:"sliderCustom",value:this.props.advancedFilters[E.i],onChange:this.props.handleEloRangeChange,valueLabelDisplay:"off",marks:this.eloRangeMarks,min:0,max:E.n})}},{key:"getTimeControlFilters",value:function(e){var t=null,a=null,n=null,s=null;return"lichess"===e?(t=[E.E,E.J],a=[E.D,E.F],n=[E.I,E.G],s="4"):(t=[E.E,E.D],n=[E.I,E.H],s="6"),u.a.createElement(l.a,null,u.a.createElement(c.a,null,u.a.createElement(d.a,null,this.getTimeControlFilterRow(t,s,"first"),a?this.getTimeControlFilterRow(a,s,"middle"):null,this.getTimeControlFilterRow(n,s,"last"))))}},{key:"getTimeControlFilterRow",value:function(e,t,a){var n=this,s="topBottomNegativeMargin";return"first"===a?s="bottomNegativeMargin":"last"===a&&(s="topNegativeMargin"),u.a.createElement(g.a,{className:s},e.map((function(e){return u.a.createElement(f.a,{sm:t,key:"ctrl".concat(e)},u.a.createElement(b.a,{className:"nomargin",control:u.a.createElement(p.a,{checked:n.props.advancedFilters[e],color:"primary",onChange:n.props.handleTimeControlChange,name:e}),label:y.d[e]}))})))}},{key:"subSectionComponent",value:function(e,t,a,n){return u.a.createElement("div",{className:"pgnloadersection"},e,": ",u.a.createElement("span",{className:"smallText"},"[",u.a.createElement("span",{className:"linkStyle",onClick:a},"change"),"]"),u.a.createElement("div",null,u.a.createElement("b",null,t)),n)}},{key:"render",value:function(){return this.getFilters(this.props.site)}}]),t}(u.a.Component)},364:function(e,t,a){e.exports=a(663)},445:function(e,t){},458:function(e,t,a){e.exports=a.p+"static/js/0.6b94261b.chunk.worker.js"},461:function(e,t){},463:function(e,t){},47:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return u})),a.d(t,"f",(function(){return m}));var n=a(3),s=a(68);function r(e,t){var a={};return t.forEach((function(t){a[t]=e[t]})),a}function i(e){var t=e.split(" ");return t.length<=4?e:"".concat(t[0]," ").concat(t[1]," ").concat(t[2])}function o(e,t,a){return(e===n.z?s.c:s.a).filter((function(e){return!!t[e]===a}))}var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function c(){for(var e=[{year:2007,value:0}],t=1,a=2010,n=(new Date).getFullYear(),s=(new Date).getMonth();a<n-1;)e.push({toLongLabel:"".concat(l[11]," ").concat(a),fromLongLabel:"".concat(l[0]," ").concat(a),year:a,value:t}),a++,t++;for(var r=11;r>0;r--){var i=(s+12-r)%12,o=i<s?n:n-1;e.push({fromLongLabel:"".concat(l[i]," ").concat(o),toLongLabel:"".concat(l[i]," ").concat(o),month:i,year:o,value:t}),t++}return e.push({month:12,year:n,value:t}),e}function p(e,t){var a=e[0],n=e[1],s=t[a],r=t[n];if(a===t.length-1&&n===t.length-1){var i=new Date;return{label:"Current month",fromMonth:i.getMonth(),fromYear:i.getFullYear(),fromTimeStamp:h(i.getMonth(),i.getFullYear(),"min")}}if(0===a&&0===n)return{label:"Anytime"};if(0===a&&n===t.length-1)return{label:"Anytime"};if(n===t.length-1){var o=s.month?s.month:0;return{label:"Since ".concat(s.fromLongLabel),fromYear:s.year,fromMonth:o,fromTimeStamp:h(o,s.year,"min")}}if(0===a){var l=r.month?r.month:11;return{label:"Until ".concat(r.toLongLabel),toYear:r.year,toMonth:l,toTimeStamp:h(l,r.year,"max")}}var c=s.month?s.month:0,p=r.month?r.month:11;return{label:"From ".concat(s.fromLongLabel," to ").concat(r.toLongLabel),fromYear:s.year,fromMonth:c,fromTimeStamp:h(c,s.year,"min"),toYear:r.year,toMonth:p,toTimeStamp:h(p,r.year,"max")}}function h(e,t,a){return"min"===a?new Date(t,e).getTime():new Date(t,e,function(e,t){return new Date(e,t+1,0).getDate()}(t,e)).getTime()}function u(e,t,a,r,i){var o=t+a+r,l=Math.round(e/o),c=i===n.v?t:r,p=i!==n.v?t:r,h=c+a/2,u=Math.round(100*h/o),m=s.b[u];return{results:"+".concat(c,"-").concat(p,"=").concat(a),performanceRating:l+m,averageElo:l,score:"".concat(Number.isInteger(h)?h:h.toFixed(1),"/").concat(o),ratingChange:"".concat(0===m?"":m>0?"+":"-").concat(Math.abs(m))}}function m(e,t){return!!t&&(!e||new Date(e)>new Date(t))}},514:function(e,t){},515:function(e,t){},571:function(e,t){},663:function(e,t,a){"use strict";a.r(t);var n=a(23),s=a.n(n),r=a(20),i=a(19),o=a(29),l=a(30),c=a(67),p=a(31),h=a(0),u=a.n(h),m=a(94),d=a.n(m),g=a(323),f=a.n(g),v=(a(379),a(47)),b=a(3),E=function(){function e(){Object(r.a)(this,e),this.graph=new y,this.hasMoves=!1}return Object(i.a)(e,[{key:"setEntries",value:function(e,t){this.graph=new y(e,t),this.hasMoves=!0}},{key:"clear",value:function(){this.graph=new y,this.hasMoves=!1}},{key:"addPGN",value:function(e,t,a,n){var s=this;e.index=this.graph.pgnStats.length,this.graph.pgnStats.push(e),this.graph.playerColor=n,this.hasMoves=!0,t.forEach((function(t){s.addMoveForFen(t.sourceFen,t.targetFen,t.moveSan,e)})),this.addGameResultOnFen(a,e.index),this.addStatsToRoot(e)}},{key:"addGameResultOnFen",value:function(e,t){var a=this.getNodeFromGraph(e,!0);a.gameResults||(a.gameResults=[]),a.gameResults.push(t)}},{key:"addStatsToRoot",value:function(e){var t=this.getNodeFromGraph(b.w,!0);t.details||(t.details={blackWins:0,whiteWins:0,draws:0,totalOpponentElo:0,lastPlayed:null});var a=this.getUpdatedMoveDetails(t.details,e);t.details=a}},{key:"getDetailsForFen",value:function(e){var t=this.getNodeFromGraph(Object(v.g)(e),!1),a=t&&t.details;if(Number.isInteger(a))a=this.getUpdatedMoveDetails({blackWins:0,whiteWins:0,draws:0,totalOpponentElo:0,lastPlayed:null},this.graph.pgnStats[a]);else if(!a)return{blackWins:0,whiteWins:0,draws:0,totalOpponentElo:0,lastPlayed:null};return a=this.updateCalculatedValues(a)}},{key:"updateCalculatedValues",value:function(e){return Number.isInteger(e.bestWin)&&(e.bestWinGame=this.graph.pgnStats[e.bestWin],e.bestWinElo=this.getOpponentElo(this.graph.playerColor,e.bestWinGame)),Number.isInteger(e.worstLoss)&&(e.worstLossGame=this.graph.pgnStats[e.worstLoss],e.worstLossElo=this.getOpponentElo(this.graph.playerColor,e.worstLossGame)),Number.isInteger(e.lastPlayed)&&(e.lastPlayedGame=this.graph.pgnStats[e.lastPlayed]),e.count=e.whiteWins+e.blackWins+e.draws,e}},{key:"addMoveForFen",value:function(e,t,a,n){var s=this.getNodeFromGraph(t,!0),r=this.getUpdatedMoveDetails(s.details,n);s.details=r;var i=this.getNodeFromGraph(e,!0);i.playedByMax=Math.max(i.playedByMax,this.getTargetDetailsCount(s.details)),i.playedBy||(i.playedBy={}),i.playedBy[a]=""}},{key:"getTargetDetailsCount",value:function(e){return e?Number.isInteger(e)?1:e.draws+e.blackWins+e.whiteWins:0}},{key:"getNodeFromGraph",value:function(e,t){var a=Object(v.g)(e),n=this.graph.nodes.get(a);return!n&&t&&((n=new w).fen=a,this.graph.nodes.set(a,n)),n}},{key:"getUpdatedMoveDetails",value:function(e,t){if(Number.isInteger(e))e=this.getUpdatedMoveDetails({blackWins:0,whiteWins:0,draws:0,totalOpponentElo:0,lastPlayed:null},this.graph.pgnStats[e]);else if(!e)return t.index;var a=0,n=0,s=0,r=0,i=this.graph.playerColor;"1-0"===t.result?(a=1,r=i===b.v?1:-1):"0-1"===t.result?(n=1,r=i===b.u?1:-1):s=1;var o=this.getOpponentElo(i,t);if(1===r){var l=null;Number.isInteger(e.bestWin)&&(l=this.graph.pgnStats[e.bestWin]),(!l||parseInt(o)>parseInt(this.getOpponentElo(i,l)))&&(e.bestWin=t.index)}if(-1===r){var c=null;Number.isInteger(e.worstLoss)&&(c=this.graph.pgnStats[e.worstLoss]),(!c||parseInt(o)<parseInt(this.getOpponentElo(i,c)))&&(e.worstLoss=t.index)}var p=null;return Number.isInteger(e.lastPlayed)&&(p=this.graph.pgnStats[e.lastPlayed]),p&&!Object(v.f)(t.date,p.date)||(e.lastPlayed=t.index),e.blackWins+=n,e.whiteWins+=a,e.draws+=s,e.totalOpponentElo+=parseInt(o),e}},{key:"getOpponentElo",value:function(e,t){return e===b.v?t.blackElo:t.whiteElo}},{key:"gameResultsForFen",value:function(e){var t=this,a=Object(v.g)(e),n=this.graph.nodes.get(a);return n&&n.gameResults?n.gameResults.map((function(e){return t.graph.pgnStats[e]})):null}},{key:"movesForFen",value:function(e){var t=this,a=Object(v.g)(e),n=this.graph.nodes.get(a);return n?Array.from(Object.entries(n.playedBy)).map((function(a){var s=new d.a(e),r=s.move(a[0],{sloppy:!0}),i=t.getDetailsForFen(s.fen());return{orig:r.from,dest:r.to,level:t.levelFor(i.count,n.playedByMax),san:r.san,details:i}})):null}},{key:"levelFor",value:function(e,t){return t<=0||e/t>.8?2:e/t>.3?1:0}}]),e}(),y=function e(t,a){var n=this;Object(r.a)(this,e),this.nodes=new Map,this.pgnStats=[],this.playerColor="",t&&t.forEach((function(e){n.nodes.set(e[0],e[1])})),a&&(this.pgnStats=a)},w=function e(){Object(r.a)(this,e),this.playedByMax=0};var k=new E,C=a(325),O=a.n(C),N=a(43),S=function(){function e(){Object(r.a)(this,e),this.plys=[{pgn:"",fen:b.w,move:null}],this.currentIndex=0}return Object(i.a)(e,[{key:"addPly",value:function(e,t){if(!(this.currentIndex<this.plys.length-1&&this.plys[this.currentIndex+1].move.san===t.san))return this.plys=this.plys.slice(0,this.currentIndex+1),this.plys.push({pgnAsList:this.pgnAsList(t.san),fen:e,move:t}),this.currentIndex++,this.plys[this.currentIndex];this.moveForward()}},{key:"pgnAsList",value:function(e){var t,a=this.pgnListSoFar();if(t=a?Object(N.a)(a):[],this.plys.length%2!==0)t.push({moveNumber:t.length+1,whitePly:e,blackPly:""});else{var n=t[t.length-1];n.blackPly=e,t[t.length-1]=n}return t}},{key:"currentMove",value:function(){return Math.floor((this.currentIndex-1)/2)}},{key:"pgnListSoFar",value:function(){return this.plys[this.plys.length-1].pgnAsList}},{key:"fen",value:function(){return this.plys[this.currentIndex].fen}},{key:"moveForward",value:function(){return this.moveTo(this.currentIndex+1)}},{key:"moveBack",value:function(){return this.moveTo(this.currentIndex-1)}},{key:"moveTo",value:function(e){return e>=0&&e<this.plys.length&&(this.currentIndex=e),this.plys[this.currentIndex]}}]),e}(),j=a(713),P=a(714),F=a(715),T=a(326),x=a(24),D=a(25),R=a(18),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).openingManager=new S,a.state={currentMove:0},window.addEventListener("keydown",a.keyHandler.bind(Object(c.a)(a))),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"keyHandler",value:function(e){switch(e.keyCode){case 37:this.previous(e,"keyboard");break;case 39:this.next(e,"keyboard")}}},{key:"shouldComponentUpdate",value:function(e){return e.fen===this.openingManager.fen()||(null===e.move?(this.openingManager=new S,!0):(this.openingManager.addPly(e.fen,e.move),!0))}},{key:"previous",value:function(e,t){var a=this.openingManager.moveBack();this.props.onChange(a.fen,a.move),this.setState({currentMove:this.openingManager.currentMove()}),Object(R.a)(b.f,"Previous",t||"mouse")}},{key:"next",value:function(e,t){var a=this.openingManager.moveForward();this.props.onChange(a.fen,a.move),this.setState({currentMove:this.openingManager.currentMove()}),Object(R.a)(b.f,"Next",t||"mouse")}},{key:"moveTo",value:function(e){var t=this;return function(){var a=t.openingManager.moveTo(2*e+1);t.props.onChange(a.fen,a.move),t.setState({currentMove:t.openingManager.currentMove()}),Object(R.a)(b.f,"move",null,e)}}},{key:"render",value:function(){var e=this,t=O()(this.openingManager.fen());return t&&(this.opening=t.name,this.openingCode=t.code),this.openingManager.pgnListSoFar()?u.a.createElement(j.a,null,u.a.createElement(P.a,null,u.a.createElement(F.a,{lg:"6",className:"navSection"},u.a.createElement(T.a,{color:"",className:"settingButton",onClick:this.previous.bind(this)},u.a.createElement(x.a,{icon:D.l})," prev")," "),u.a.createElement(F.a,{lg:"6",className:"navSection"},u.a.createElement(T.a,{color:"",className:"settingButton",onClick:this.next.bind(this)},"next ",u.a.createElement(x.a,{icon:D.m})))),u.a.createElement(P.a,{className:"greyText"},this.openingCode,": ",this.opening),this.openingManager.pgnListSoFar().map((function(t,a){return u.a.createElement(P.a,{key:"".concat(t.moveNumber),onClick:e.moveTo(a).bind(e),className:"navCol ".concat(e.openingManager.currentMove()===a?"selectedMove":"")},u.a.createElement(F.a,{sm:"12",className:"navMove border"},"".concat(t.moveNumber,". ").concat(t.whitePly," ").concat(t.blackPly)))}))):u.a.createElement("div",null)}}]),t}(u.a.Component),G=a(37),I=(a(384),a(327)),A=a(716),L=a(717),B=a(718),W=a(664),z=a(719),U=a(720),_=a(721),J=a(753),V=a(754),H=a(722),Y=a(723),q=a(755),K=a(724),Q=a(725),X=a(726),$=a(727),Z=function(e){var t=Object(h.useState)(!1),a=Object(G.a)(t,2),n=a[0],s=a[1],r=Object(h.useState)(!1),i=Object(G.a)(r,2),o=i[0],l=i[1],c=function(){return l(!o)},p=function(e){return function(){window.open(e,"_blank")}};return u.a.createElement("div",null,u.a.createElement(A.a,{color:"light",light:!0,expand:"md"},u.a.createElement("img",{src:"/opening-tree-logo.png",height:"32px",width:"32px",alt:"Logo"}),u.a.createElement(L.a,{href:"/"},"\xa0OpeningTree.com"),u.a.createElement(B.a,{onClick:function(){return s(!n)}}),u.a.createElement(W.a,{isOpen:n,navbar:!0},u.a.createElement(z.a,{className:"mr-auto",navbar:!0},u.a.createElement(U.a,null,u.a.createElement(_.a,{className:"navLinkButton",onClick:p("https://www.youtube.com/watch?v=AJ66-HqdpXE")},'"It\'s so powerful" - IM Eric Rosen ',u.a.createElement("span",{className:"smallText"},"[Watch video]")))),u.a.createElement(z.a,{className:"ml-auto",navbar:!0},u.a.createElement(U.a,null,u.a.createElement(_.a,{className:"navLinkButton",onClick:p(b.p)},u.a.createElement(x.a,{icon:I.a,className:"discordIcon"})," Join our discord"))),u.a.createElement(z.a,{className:"",navbar:!0},u.a.createElement(U.a,null,u.a.createElement(_.a,{className:"navLinkButton",onClick:e.toggleFeedback},u.a.createElement(x.a,{icon:D.e,className:"feedbackIcon"})," Send feedback"))),u.a.createElement(J.a,null,u.a.createElement(V.a,{className:"bootNavColor",nav:!0},u.a.createElement(x.a,{icon:D.a,className:"moreIcon"}),"More"),u.a.createElement(H.a,{right:!0},u.a.createElement(Y.a,{onClick:c},"Acknowledgements"),u.a.createElement(Y.a,{onClick:p("https://www.openingtree.com/old")},"Old version"),u.a.createElement(Y.a,{divider:!0}),u.a.createElement(Y.a,{onClick:p("https://lichess.org/")},"Lichess"),u.a.createElement(Y.a,{onClick:p("https://www.lichess4545.com/")},"Lichess4545"),u.a.createElement(Y.a,{onClick:p("https://www.chess.com")},"Chess.com"))))),u.a.createElement(q.a,{isOpen:o,toggle:c},u.a.createElement(K.a,{toggle:c},"Acknowledgements"),u.a.createElement(Q.a,{className:"acknowledgement"},u.a.createElement(X.a,{tag:"a",href:"https://lichess.org/api",target:"_blank",action:!0},"Lichess API"),u.a.createElement(X.a,{tag:"a",href:"https://www.chess.com/club/chess-com-developer-community",target:"_blank",action:!0},"Chess.com API"),u.a.createElement(X.a,{tag:"a",href:"https://github.com/ruilisi/react-chessground",target:"_blank",action:!0},"ChessGround"),u.a.createElement(X.a,{tag:"a",href:"https://github.com/jhlywa/chess.js",target:"_blank",action:!0},"Chess.js"),u.a.createElement(X.a,{tag:"a",href:"https://github.com/niklasf/eco",target:"_blank",action:!0},"Eco"),u.a.createElement(X.a,{tag:"a",href:"https://github.com/jimmywarting/StreamSaver.js",target:"_blank",action:!0},"StreamSaver.js"),u.a.createElement(X.a,{tag:"a",href:"https://www.flaticon.com/authors/google/",target:"_blank",action:!0},"Icons made by google"),u.a.createElement(X.a,{tag:"a",href:"https://www.flaticon.com/",target:"_blank",action:!0},"FlatIcons.com"),u.a.createElement(X.a,{tag:"a",href:"https://www.freelogodesign.org",target:"_blank",action:!0},"Free logo design"),u.a.createElement(X.a,{tag:"a",href:"https://github.com/kevinludwig/pgn-parser",target:"_blank",action:!0},"PGN Parser"),u.a.createElement(X.a,{tag:"a",href:"https://www.npmjs.com/package/material-ui-dropzone",target:"_blank",action:!0},"Dropzone"),u.a.createElement(X.a,{tag:"a",href:"https://www.pgnmentor.com",target:"_blank",action:!0},"PGN Mentor"),u.a.createElement(X.a,{tag:"a",href:"https://www.twitch.tv/imrosen",target:"_blank",action:!0},"IM Eric Rosen")),u.a.createElement($.a,null,u.a.createElement(T.a,{color:"secondary",onClick:c},"Done"))))},ee=a(95),te=a(26),ae=a(670),ne=a(352),se=a(354),re=a(669),ie=a(668),oe=a(112),le=a.n(oe),ce=a(666),pe=a(331),he=a.n(pe),ue=a(333),me=a.n(ue),de=a(152),ge=a.n(de),fe=a(673),ve=a(332),be=a.n(ve),Ee=a(731),ye=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"getSourceOption",value:function(e,t){return e===b.z?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement("img",{alt:"lichess",className:"siteimage",src:"./lichesslogo.png"}),u.a.createElement("span",{className:"sourceName"}," lichess.org ")):e===b.x?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement("img",{alt:"chess.com",className:"siteimage",src:"./chesscomlogo.png"})):e===b.B?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement(he.a,{className:"lowOpacity"}),u.a.createElement("span",{className:"sourceName"}," Upload PGN file")):e===b.y?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement(be.a,{className:"lowOpacity"}),u.a.createElement("span",{className:"sourceName"}," Notable chess events")):e===b.C?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement(me.a,{className:"lowOpacity"}),u.a.createElement("span",{className:"sourceName"}," Notable chess players")):e===b.A?u.a.createElement("span",null,t?Object(te.d)("done",t):null,u.a.createElement(ge.a,{className:"lowOpacity"}),u.a.createElement("span",{className:"sourceName"}," Openingtree file ",u.a.createElement(Ee.a,{className:"sourceName",color:"secondary"},"New"))):u.a.createElement("span",null,Object(te.d)(1,t),"Select a source")}},{key:"render",value:function(){return u.a.createElement(te.a,{TransitionComponent:ce.a,TransitionProps:{timeout:b.l},expanded:"source"===this.props.expandedPanel,onChange:this.props.handleExpansionChange},u.a.createElement(ie.a,{expandIcon:u.a.createElement(le.a,null),"aria-controls":"panel1c-content",id:"panel1c-header"},u.a.createElement("div",null,this.getSourceOption(this.props.site,!0))),u.a.createElement(re.a,null,u.a.createElement(ae.a,{onChange:this.props.siteChange,value:this.props.site},u.a.createElement(ne.a,{className:"sitelabel",value:b.z,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.z)}),u.a.createElement(ne.a,{className:"sitelabel",value:b.x,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.x)}),u.a.createElement(ne.a,{className:"sitelabel",value:b.A,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.A)}),u.a.createElement(fe.a,{className:"dividerMargin"}),u.a.createElement(ne.a,{className:"sitelabel",value:b.C,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.C)}),u.a.createElement(ne.a,{className:"sitelabel",value:b.y,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.y)}),u.a.createElement(ne.a,{className:"sitelabel",value:b.B,control:u.a.createElement(se.a,{color:"primary"}),label:this.getSourceOption(b.B)}))))}}]),t}(u.a.Component),we=a(749),ke=a(129),Ce=a(676),Oe=a(349),Ne=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"handleFileChange",value:function(e){Object(R.a)(b.g,"FileSaved",e.length>0?e[0].name:null),this.props.filesChange(e)}},{key:"render",value:function(){return u.a.createElement(Oe.a,{acceptedFiles:[],dropzoneText:this.props.dropzoneText,onChange:this.handleFileChange.bind(this),dropzoneParagraphClass:"dropzonetext",showFileNames:!0,useChipsForPreview:!0,previewChipProps:{className:"previewChip"},dropzoneClass:"dropzone",filesLimit:this.props.filesLimit,maxFileSize:3e12})}}]),t}(u.a.Component),Se=a(339),je=a.n(Se),Pe=a(340),Fe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).updateDetails=function(e){Object(R.a)(b.g,"NotableGameSelected",e.value),a.props.onChange(e)},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"renderDetails",value:function(e){return u.a.createElement("div",null,u.a.createElement("span",null,u.a.createElement(Pe.LazyLoadImage,{alt:e.name,className:"profilePicture",width:"40",height:"40",src:e.profile.imageUrl})),u.a.createElement("div",null,e.name),u.a.createElement("div",{className:"smallText"},e.profile.subText))}},{key:"render",value:function(){if(!this.props.list)return u.a.createElement("div",{className:"lowOpacity textCenter"},u.a.createElement("img",{alt:"loading",width:"25",height:"25",src:"./spinner.gif"})," Loading List");if(!this.props.list.length)return u.a.createElement("div",{className:"lowOpacity textCenter"}," Could not fetch list");var e=this.props.list.map((function(e){return Object(ee.a)({},e,{value:e.name})}));return u.a.createElement(je.a,{name:"goatPlayers",value:this.props.selectedDetail.value,options:e,placeholder:this.props.placeholder,renderOption:this.renderDetails,onChange:this.updateDetails})}}]),t}(u.a.Component),Te=a(735),xe=a(736),De=a(737),Re=a(738),Me=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={playerName:"",files:[],selectedPlayer:{},selectedEvent:{}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"editPlayerName",value:function(e){this.setState({playerName:e.target.value,playerNameError:""})}},{key:"filesChange",value:function(e){this.setState({files:e})}},{key:"notablePlayerChange",value:function(e){this.setState({selectedPlayer:e})}},{key:"notableEventChange",value:function(e){this.setState({selectedEvent:e})}},{key:"componentWillReceiveProps",value:function(){this.setState({playerNameError:""})}},{key:"validateInputDetailsSet",value:function(){if(this.props.site===b.y){if(!this.state.selectedEvent)return this.props.showError("Please select an event"),!1}else if(this.props.site===b.C){if(!this.state.selectedPlayer)return this.props.showError("Please select a player"),!1}else if(this.props.site===b.z||this.props.site===b.x){if(!this.state.playerName)return this.setState({playerNameError:"Please enter a username"}),!1}else if(this.props.site===b.B){if(0===this.state.files.length)return this.props.showError("Please upload a PGN file"),!1}else if(this.props.site===b.A&&0===this.state.files.length)return this.props.showError("Please upload an openingtree file"),!1;return!0}},{key:"finalPlayerName",value:function(e,t,a){return e===b.C?a.name:e===b.y?"":t}},{key:"setPlayerDetails",value:function(){this.validateInputDetailsSet()&&this.props.playerDetailsChange(this.finalPlayerName(this.props.site,this.state.playerName,this.state.selectedPlayer),this.state.files,this.state.selectedEvent,this.state.selectedPlayer)}},{key:"getSummary",value:function(){if(this.props.site===b.C){if(this.props.selectedPlayer&&this.props.selectedPlayer.name)return u.a.createElement("span",null,Object(te.d)("done"),this.props.selectedPlayer.profile.title,"\xa0",u.a.createElement("b",null,this.props.selectedPlayer.name))}else if(this.props.site===b.z||this.props.site===b.x){if(this.props.playerName)return u.a.createElement("span",null,Object(te.d)("done"),"User: ",u.a.createElement("b",null,this.props.playerName))}else if(this.props.site===b.B||this.props.site===b.A){if(1===this.props.files.length)return u.a.createElement("span",null,Object(te.d)("done"),"File: ",u.a.createElement("b",null,this.props.files[0].name));if(this.props.files.length>1)return u.a.createElement("span",null,Object(te.d)("done"),this.props.files.length," PGN files uploaded")}else if(this.props.site===b.y&&this.props.selectedEvent&&this.props.selectedEvent.name)return u.a.createElement("span",null,Object(te.d)("done"),this.props.selectedEvent.name);return u.a.createElement("span",null,Object(te.d)(2),"Player details")}},{key:"getPlayerNameInput",value:function(e,t){return u.a.createElement(we.a,{className:"playernameField",name:"playerName",id:"playerNameTextBox",margin:"dense",onChange:this.editPlayerName.bind(this),label:e,variant:"outlined",value:this.state.playerName,helperText:this.state.playerNameError?this.state.playerNameError:t,error:!!this.state.playerNameError,onKeyUp:this.playerNameKeyUp.bind(this)})}},{key:"playerNameKeyUp",value:function(e){13===e.keyCode&&this.setPlayerDetails()}},{key:"getGoatDBSelection",value:function(){return u.a.createElement(Fe,{list:this.props.notablePlayers,placeholder:"Select a player",onChange:this.notablePlayerChange.bind(this),selectedDetail:this.state.selectedPlayer})}},{key:"getGoatDBEventSelection",value:function(){return u.a.createElement(Fe,{list:this.props.notableEvents,placeholder:"Select an event",onChange:this.notableEventChange.bind(this),selectedDetail:this.state.selectedEvent})}},{key:"getPgnFileSelection",value:function(){return u.a.createElement("div",null,u.a.createElement(Ne,{filesChange:this.filesChange.bind(this),filesLimit:10,dropzoneText:"Drag and drop up to 10 pgn files here or click here to select files"}),this.getPlayerNameInput("player name in PGN","Leave blank to load all games"))}},{key:"getOpeningTreeSelection",value:function(){return u.a.createElement("div",null,u.a.createElement(Te.a,null,u.a.createElement(xe.a,{className:"singlePadding"},u.a.createElement(De.a,{className:"smallBottomMargin"},u.a.createElement(x.a,{icon:D.i,className:"lowOpacity"})," How it works"),u.a.createElement(Re.a,{className:"smallText"},"If you plan to revisit the same player, you can save a ",u.a.createElement("b",null,".tree")," file locally by loading a tree and then clicking ",u.a.createElement("i",null,'"Save Openingtree"'),". To reload the same tree, drop the ",u.a.createElement("b",null,".tree")," file in the dropzone below."))),u.a.createElement("br",null),u.a.createElement(Ne,{filesChange:this.filesChange.bind(this),filesLimit:1,dropzoneText:"Drag and drop openingtree save file here or click here to select a file"}))}},{key:"getInputsToShow",value:function(){return this.props.site===b.B?this.getPgnFileSelection():this.props.site===b.z?this.getPlayerNameInput("lichess username"):this.props.site===b.x?this.getPlayerNameInput("chess.com username"):this.props.site===b.y?this.getGoatDBEventSelection():this.props.site===b.C?this.getGoatDBSelection():this.props.site===b.A?this.getOpeningTreeSelection():u.a.createElement("div",null)}},{key:"render",value:function(){return u.a.createElement(te.a,{expanded:"user"===this.props.expandedPanel,TransitionComponent:ce.a,TransitionProps:{timeout:b.l},onChange:this.props.handleExpansionChange,disabled:""===this.props.site},u.a.createElement(ie.a,{expandIcon:u.a.createElement(le.a,null)},this.getSummary()),u.a.createElement(re.a,null,this.getInputsToShow()),u.a.createElement(fe.a,null),u.a.createElement(Ce.a,null,u.a.createElement(ke.a,{size:"small",color:"primary",onClick:this.setPlayerDetails.bind(this)},"Continue")))}}]),t}(u.a.Component),Ge=a(341),Ie=a(343),Ae=a(348),Le=a.n(Ae),Be=a(76),We=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={playerName:"",site:"",playerColor:a.props.settings.playerColor,isAdvancedFiltersOpen:!1,isGamesSubsectionOpen:!1,expandedPanel:"source",notablePlayers:null,notableEvents:null,files:[],selectedNotableEvent:{},selectedNotablePlayer:{}},a.timeframeSteps=Object(v.e)(),a.state[b.k]=[0,a.timeframeSteps.length-1],a.state[b.h]=b.m,a.state[b.J]=!0,a.state[b.E]=!0,a.state[b.D]=!0,a.state[b.I]=!0,a.state[b.F]=!0,a.state[b.G]=!0,a.state[b.H]=!0,a.state[b.j]="all",a.state[b.i]=[0,b.n],a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"advancedFilters",value:function(){return Object(v.a)(this.state,[b.J,b.E,b.D,b.I,b.G,b.H,b.F,b.j,b.k,b.h,b.i])}},{key:"handleExpansionChange",value:function(e){var t=this;return function(a,n){t.setState({expandedPanel:!!n&&e})}}},{key:"exportOpeningTreeObject",value:function(){return{header:{version:2,timestamp:Math.floor(Date.now()/1e3),gamesProcessed:this.props.gamesProcessed,settings:this.props.settings,playerName:this.state.playername,site:this.state.site,advancedFilters:this.advancedFilters()},arrays:[Object(N.a)(this.props.openingGraph.graph.nodes.entries()),Object(N.a)(this.props.openingGraph.graph.pgnStats)]}}},{key:"importOpeningTreeObject",value:function(e){var t=1;return e.header.version&&(t=e.header.version),t<b.r?(this.props.showError("This is an old format of openingtree file.",null,"You can try loading it by visiting the old website",b.a),!1):(this.setState(Object(ee.a)({},e.header.advancedFilters,{playerColor:e.header.settings.playerColor,site:e.header.site,playerName:e.header.settings.playerName})),k.setEntries(e.arrays[0],e.arrays[1]),this.props.importCallback({settings:e.header.settings,gamesProcessed:e.header.gamesProcessed,openingGraph:k}),!0)}},{key:"playerDetailsChange",value:function(e,t,a,n){this.setState({playerName:e,expandedPanel:Be.c(this.state.site,e,n)?"filters":"",files:t,selectedNotableEvent:a,selectedNotablePlayer:n,playerColor:""}),Object(R.a)(b.g,"PlayerNameSaved")}},{key:"fetchGOATGames",value:function(e,t){var a=this;Le.a.get(e,(function(e,n){if(e)return a.props.showError("Could not fetch player list. Failed to connect to DB."),void t([]);var s;try{s=JSON.parse(n.body).list}catch(r){console.log(r)}s?t(s):(a.props.showError("Failed to load games."),t([]))}))}},{key:"siteChange",value:function(e){var t=this,a=e.target.value;a!==b.C||this.state.notablePlayers||this.fetchGOATGames("https://goatchess.github.io/list.json",(function(e){t.setState({notablePlayers:e})})),a!==b.y||this.state.notableEvents||this.fetchGOATGames("https://goatevents.github.io/list.json",(function(e){t.setState({notableEvents:e})})),this.setState({site:a,expandedPanel:"user"}),Object(R.a)(b.g,"ChangeSite",a)}},{key:"filtersChange",value:function(e){this.setState(Object(ee.a)({},e,{expandedPanel:""})),Object(R.a)(b.g,"FitlersSaved",this.state.site)}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{className:"pgnloadersection"},u.a.createElement(ye,{expandedPanel:this.state.expandedPanel,handleExpansionChange:this.handleExpansionChange("source").bind(this),site:this.state.site,siteChange:this.siteChange.bind(this)}),u.a.createElement(Me,{expandedPanel:this.state.expandedPanel,playerName:this.state.playerName,handleExpansionChange:this.handleExpansionChange("user").bind(this),showError:this.props.showError,files:this.state.files,notablePlayers:this.state.notablePlayers,notableEvents:this.state.notableEvents,site:this.state.site,playerDetailsChange:this.playerDetailsChange.bind(this),pgnUrl:this.state.pgnUrl,selectedPlayer:this.state.selectedNotablePlayer,selectedEvent:this.state.selectedNotableEvent}),u.a.createElement(Ge.a,{expandedPanel:this.state.expandedPanel,playerColor:this.state.playerColor,handleExpansionChange:this.handleExpansionChange("filters").bind(this),site:this.state.site,playerName:this.state.playerName,advancedFilters:this.advancedFilters(),timeframeSteps:this.timeframeSteps,filtersChange:this.filtersChange.bind(this),selectedNotablePlayer:this.state.selectedNotablePlayer})),u.a.createElement(Ie.a,{expandedPanel:this.state.expandedPanel,playerColor:this.state.playerColor,files:this.state.files,playerName:this.state.playerName,site:this.state.site,advancedFilters:this.advancedFilters(),notify:this.props.notify,showError:this.props.showError,onChange:this.props.onChange,setDownloading:this.props.setDownloading,clear:this.props.clear,isDownloading:this.props.isDownloading,switchToMovesTab:this.props.switchToMovesTab,gamesProcessed:this.props.gamesProcessed,selectedNotablePlayer:this.state.selectedNotablePlayer,selectedNotableEvent:this.state.selectedNotableEvent,exportOpeningTreeObject:this.exportOpeningTreeObject.bind(this),showInfo:this.props.showInfo,importOpeningTreeObject:this.importOpeningTreeObject.bind(this)}))}}]),t}(u.a.Component),ze=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"toggle",value:function(e){var t=this;return function(){var a=t.props.settings[e]===b.v?b.u:b.v;t.props.onChange(e,a),Object(R.a)(b.c,"ChangeOrientation")}}},{key:"analyse",value:function(){window.open("https://www.lichess.org/analysis/standard/".concat(this.props.fen),"_blank"),Object(R.a)(b.c,"AnalyzeGame")}},{key:"resetAction",value:function(){this.props.reset(),Object(R.a)(b.c,"Reset")}},{key:"clearAction",value:function(){this.props.clear(),Object(R.a)(b.c,"Clear")}},{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(j.a,null,u.a.createElement(P.a,{sm:"12"},u.a.createElement(F.a,{sm:"6"},u.a.createElement(T.a,{className:"settingButton",onClick:this.toggle("orientation"),color:""},u.a.createElement("h3",null,u.a.createElement(x.a,{icon:D.k}))," Flip board")),u.a.createElement(F.a,{sm:"6"},u.a.createElement(T.a,{className:"settingButton",onClick:this.clearAction.bind(this),color:""},u.a.createElement("h3",null,u.a.createElement(x.a,{icon:D.n}))," Clear games")),u.a.createElement(F.a,{sm:"6"},u.a.createElement(T.a,{className:"settingButton",onClick:this.resetAction.bind(this),color:""},u.a.createElement("h3",null,u.a.createElement(x.a,{icon:D.h}))," Starting position")),u.a.createElement(F.a,{sm:"6"},u.a.createElement(T.a,{className:"settingButton",onClick:this.analyse.bind(this),color:""},u.a.createElement("h3",null,u.a.createElement(x.a,{icon:D.f}))," Computer analysis")))))}}]),t}(u.a.Component),Ue=a(746),_e=a(747),Je=a(8),Ve=a.n(Je),He=a(752),Ye=a(745),qe=a(739),Ke=a(743),Qe=a(741),Xe=a(742),$e=a(740),Ze=a(744),et=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"eatClicks",value:function(e){e.stopPropagation()}},{key:"copyFen",value:function(){Object(te.c)("fenField"),this.props.showInfo("FEN copied")}},{key:"getFenField",value:function(){return this.props.simplifiedView?null:u.a.createElement("div",{className:"fenDiv"},u.a.createElement(we.a,{id:"fenField",multiline:!0,label:"FEN",rowsMax:"2",value:this.props.fen,inputProps:{style:{fontSize:12},spellCheck:!1},variant:"outlined",className:"fenField",margin:"dense",onClick:this.copyFen.bind(this)}))}},{key:"render",value:function(){var e=this;if(!this.props.moveDetails.lastPlayedGame)return u.a.createElement("div",null,this.getFenField(),u.a.createElement("div",{className:"infoMessage"},"No data to show. Please enter a lichess or chess.com user name in the",u.a.createElement("span",{className:"navLinkButton",onClick:function(){return e.props.switchToUserTab()}}," ",u.a.createElement(x.a,{icon:D.o})," User"),' tab and click "Load"'));var t={};return this.props.isOpen&&(t=Object(v.b)(this.props.moveDetails.totalOpponentElo,this.props.moveDetails.whiteWins,this.props.moveDetails.draws,this.props.moveDetails.blackWins,this.props.settings.playerColor)),u.a.createElement("div",null,this.getFenField(),u.a.createElement(qe.a,{onClick:this.eatClicks},isNaN(t.performanceRating)?null:u.a.createElement($e.a,{className:"performanceRatingRow".concat(this.props.simplifiedView?" performanceHeader":"")},u.a.createElement(Qe.a,null,u.a.createElement(Xe.a,{className:"performanceRatingRow"},u.a.createElement("b",null,"Performance")),u.a.createElement(Xe.a,{className:"performanceRatingRow"},u.a.createElement("b",null,t.performanceRating)))),u.a.createElement(Ke.a,null,u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Results"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},t.results)),isNaN(t.averageElo)?null:u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Avg opponent"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},t.averageElo)),u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Score"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},t.score)),this.props.simplifiedView||isNaN(t.averageElo)?null:u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Rating change"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},t.ratingChange)),!this.props.simplifiedView&&this.props.moveDetails.bestWinElo?u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Best win"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},this.props.moveDetails.bestWinElo," ",u.a.createElement(x.a,{className:"pointerExternalLink",onClick:this.props.launchGame(this.props.moveDetails.bestWinGame),icon:D.g}))):null,!this.props.simplifiedView&&this.props.moveDetails.worstLossElo?u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Worst loss"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},this.props.moveDetails.worstLossElo," ",u.a.createElement(x.a,{className:"pointerExternalLink",onClick:this.props.launchGame(this.props.moveDetails.worstLossGame),icon:D.g}))):null,u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},"Last played"),u.a.createElement(Xe.a,{className:"performanceRatingRow"},this.removeQuestionMarksFromDate(this.props.moveDetails.lastPlayedGame.date)," ",u.a.createElement(x.a,{className:"pointerExternalLink",onClick:this.props.launchGame(this.props.moveDetails.lastPlayedGame),icon:D.g})))),this.props.simplifiedView?null:u.a.createElement(Ze.a,null,u.a.createElement(Qe.a,null,u.a.createElement(Xe.a,{colSpan:"2"},"Calculated based on ",u.a.createElement("a",{href:"https://handbook.fide.com/chapter/B022017",target:"_blank",rel:"noopener noreferrer"},"FIDE regulations"))))))}},{key:"removeQuestionMarksFromDate",value:function(e){return-1===e.indexOf("?")?e:e.slice(0,e.indexOf("."))}}]),t}(u.a.Component),tt=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={openPerformanceIndex:null},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"move",value:function(e,t){var a=this;return function(){a.props.onMove(e,t),Object(R.a)(b.e,"MoveClicked")}}},{key:"componentDidUpdate",value:function(e,t){e.turnColor!==this.props.turnColor&&this.setState({openPerformanceIndex:null})}},{key:"togglePerformancePopover",value:function(e){var t=this;return function(a){null!==t.state.openPerformanceIndex?t.setState({openPerformanceIndex:null}):t.setState({openPerformanceIndex:e}),a.stopPropagation()}}},{key:"render",value:function(){var e=this;return this.props.movesToShow?u.a.createElement("div",null,this.props.gameResults&&this.props.gameResults.length>0?this.resultsTable():null,this.movesTable()):u.a.createElement("div",{className:"infoMessage"},"No moves to show. Please select a source from the",u.a.createElement("span",{className:"navLinkButton",onClick:function(){return e.props.switchToUserTab()}}," ",u.a.createElement(x.a,{icon:D.o})," User")," tab and enter the details.")}},{key:"resultsTable",value:function(){var e=this;return u.a.createElement(qe.a,null,u.a.createElement(Ke.a,null,this.props.gameResults.map((function(t){var a=e.player(t.white,t.whiteElo),n=e.player(t.black,t.blackElo);return u.a.createElement(Qe.a,{className:"moveRow",key:"".concat(t.url),onClick:e.props.launchGame(t)},u.a.createElement(Xe.a,null,"1-0"===t.result?u.a.createElement("b",null,a):a," ",t.result," ","0-1"===t.result?u.a.createElement("b",null,n):n))}))))}},{key:"player",value:function(e,t){return"".concat(e).concat(t?"(".concat(t,")"):"")}},{key:"getPopover",value:function(e){var t=this.state.openPerformanceIndex===e,a=this.props.movesToShow[e];return u.a.createElement(He.a,{trigger:"hover",placement:"right",isOpen:t,target:"performancePopover".concat(e),toggle:this.togglePerformancePopover(e)},u.a.createElement(et,{moveDetails:a.details,simplifiedView:!0,isOpen:t,launchGame:this.props.launchGame,settings:this.props.settings}))}},{key:"movesTable",value:function(){var e=this,t=this.props.movesToShow&&this.props.movesToShow.length>0;return u.a.createElement(qe.a,null,t?u.a.createElement($e.a,null,u.a.createElement(Qe.a,null,u.a.createElement(Xe.a,{size:"small",className:"smallCol"},u.a.createElement("b",null,"Move")),u.a.createElement(Xe.a,{size:"small",className:"smallCol"},u.a.createElement("b",null,"Games")),u.a.createElement(Xe.a,null,u.a.createElement("b",null,"Results")))):null,t?u.a.createElement(Ke.a,null,this.props.movesToShow.map((function(t,a){var n=e.player(t.details.lastPlayedGame.white,t.details.lastPlayedGame.whiteElo),s=e.player(t.details.lastPlayedGame.black,t.details.lastPlayedGame.blackElo),r=t.details.lastPlayedGame.result;return t.details.count>1?u.a.createElement(Qe.a,{className:"moveRow",key:"".concat(t.orig).concat(t.dest),onClick:e.move(t.orig,t.dest)},u.a.createElement(Xe.a,{size:"small",className:"smallCol"},t.san," "),u.a.createElement(Xe.a,{size:"small",id:"performancePopover".concat(a),className:"smallCol",onClick:e.togglePerformancePopover(a)},t.details.count," ",u.a.createElement(x.a,{className:"lowOpacity",icon:D.i}),e.getPopover(a)),u.a.createElement(Xe.a,null,u.a.createElement(Ye.a,{className:"border",multi:!0},u.a.createElement(Ye.a,{bar:!0,className:"whiteMove",value:"".concat(t.details.whiteWins/t.details.count*100)},t.details.whiteWins/t.details.count>.1?t.details.whiteWins:""),u.a.createElement(Ye.a,{bar:!0,className:"grayMove",value:"".concat(t.details.draws/t.details.count*100)},t.details.draws/t.details.count>.1?t.details.draws:""),u.a.createElement(Ye.a,{bar:!0,className:"blackMove",value:"".concat(t.details.blackWins/t.details.count*100)},t.details.blackWins/t.details.count>.1?t.details.blackWins:"")))):u.a.createElement(Qe.a,{className:"moveRow",key:"".concat(t.orig).concat(t.dest),onClick:e.move(t.orig,t.dest)},u.a.createElement(Xe.a,{size:"small",className:"smallCol"},t.san),u.a.createElement(Xe.a,{colSpan:"2"},n," ",r," ",s," ",u.a.createElement(x.a,{className:"pointerExternalLink",onClick:e.props.launchGame(t.details.lastPlayedGame),icon:D.g})))}))):null,u.a.createElement(Ze.a,null,u.a.createElement(Qe.a,null,this.props.settings.playerName?t?u.a.createElement(Xe.a,{colSpan:"3"},"Showing moves that have been played ",this.props.turnColor===this.props.settings.playerColor?"by":"by others against"," ",u.a.createElement("b",null,this.props.settings.playerName)," in this position. ",u.a.createElement("b",null,this.props.settings.playerName)," is playing as ",u.a.createElement("b",null,this.props.settings.playerColor),"."):u.a.createElement(Xe.a,{colSpan:"3"},"No moves found played by ",this.props.turnColor===this.props.settings.playerColor?"by":"by others against"," ",u.a.createElement("b",null,this.props.settings.playerName)," in this position. ",u.a.createElement("b",null,this.props.settings.playerName)," is playing as ",u.a.createElement("b",null,this.props.settings.playerColor),"."):t?u.a.createElement(Xe.a,{colSpan:"3"},"Showing all moves that have been played by ",u.a.createElement("b",null,this.props.turnColor)," in this position."):u.a.createElement(Xe.a,{colSpan:"3"},"No moves found played by ",u.a.createElement("b",null,this.props.turnColor)," in this position."))))}}]),t}(u.a.Component),at=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={activeTab:"user",activeGame:null},a.toggleModal=function(){a.setState({activeGame:null})},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"launchGame",value:function(e){var t=this;return e.url?function(t){t.stopPropagation(),window.open(e.url,"_blank"),Object(R.a)(b.e,"ViewGameExternal")}:function(a){a.stopPropagation(),t.setState({activeGame:e})}}},{key:"toggle",value:function(e){this.state.activeTab!==e&&(this.setState({activeTab:e}),Object(R.a)(b.c,"activeTab:".concat(e)))}},{key:"switchToUserTab",value:function(){this.toggle("user")}},{key:"switchToMovesTab",value:function(){this.toggle("moves")}},{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement(q.a,{isOpen:this.state.activeGame,toggle:this.toggleModal},u.a.createElement(K.a,{toggle:this.toggleModal},"Game details"),this.state.activeGame?u.a.createElement(qe.a,null,u.a.createElement(Ke.a,null,Object.entries(this.state.activeGame.headers).map((function(e){return e[1]?u.a.createElement(Qe.a,{className:"performanceRatingRow"},u.a.createElement(Xe.a,{className:"performanceRatingRow"},e[0]),u.a.createElement(Xe.a,{className:"performanceRatingRow"},e[1])):null})))):null,u.a.createElement($.a,null,u.a.createElement(T.a,{color:"secondary",onClick:this.toggleModal},"Done"))),u.a.createElement(z.a,{tabs:!0},u.a.createElement(U.a,null,u.a.createElement(_.a,{className:Ve()({active:"user"===this.state.activeTab}),onClick:function(){e.toggle("user")}},u.a.createElement(x.a,{icon:D.o})," ","user"===this.state.activeTab?"User":"")),u.a.createElement(U.a,null,u.a.createElement(_.a,{className:Ve()({active:"moves"===this.state.activeTab}),onClick:function(){e.toggle("moves")}},u.a.createElement(x.a,{icon:D.j})," ","moves"===this.state.activeTab?"Moves":"")),u.a.createElement(U.a,null,u.a.createElement(_.a,{className:Ve()({active:"report"===this.state.activeTab}),onClick:function(){e.toggle("report")}},u.a.createElement(x.a,{icon:D.c})," ","report"===this.state.activeTab?"Report":"")),u.a.createElement(U.a,null,u.a.createElement(_.a,{className:Ve()({active:"settings"===this.state.activeTab}),onClick:function(){e.toggle("settings")}},u.a.createElement(x.a,{icon:D.d})," ","settings"===this.state.activeTab?"Controls":""))),u.a.createElement(Ue.a,{activeTab:this.state.activeTab},u.a.createElement(_e.a,{tabId:"user"},u.a.createElement(We,{switchToMovesTab:this.switchToMovesTab.bind(this),clear:this.props.clear,gamesProcessed:this.props.gamesProcessed,settings:this.props.settings,onChange:this.props.settingsChange,notify:this.props.updateProcessedGames,showError:this.props.showError,showInfo:this.props.showInfo,setDownloading:this.props.setDownloading,isDownloading:this.props.isDownloading,openingGraph:this.props.openingGraph,importCallback:this.props.importCallback})),u.a.createElement(_e.a,{tabId:"moves"},u.a.createElement(tt,{switchToUserTab:this.switchToUserTab.bind(this),movesToShow:this.props.movesToShow,gameResults:this.props.gameResults,onMove:this.props.onMove,settings:this.props.settings,turnColor:this.props.turnColor,settingsChange:this.props.settingsChange,launchGame:this.launchGame.bind(this)})),u.a.createElement(_e.a,{tabId:"report"},u.a.createElement(et,{fen:this.props.fen,simplifiedView:!1,moveDetails:this.props.openingGraph.getDetailsForFen(this.props.fen),launchGame:this.launchGame.bind(this),settings:this.props.settings,switchToUserTab:this.switchToUserTab.bind(this),isOpen:"report"===this.state.activeTab,showInfo:this.props.showInfo})),u.a.createElement(_e.a,{tabId:"settings"},u.a.createElement(P.a,null,u.a.createElement(F.a,{sm:"6"},u.a.createElement(ze,{fen:this.props.fen,settings:this.props.settings,isOpen:!0,clear:this.props.clear,reset:this.props.reset,onChange:this.props.settingsChange}))))))}}]),t}(u.a.Component);function nt(){return"w"===this.chess.turn()?b.v:b.u}function st(){return this.state.settings.playerColor}function rt(){return this.playerColor()===this.turnColor()?this.forBrushes:this.againstBrushes}function it(){var e=this,t={};return this.chess.SQUARES.forEach((function(a){var n=e.chess.moves({square:a,verbose:!0});n.length&&(t[a]=n.map((function(e){return e.to})))})),{free:!1,dests:t,color:this.turnColor()}}function ot(){return this.state.settings.orientation}function lt(e,t){var a=this.chess,n=a.move({from:e,to:t,promotion:"q"});this.setState({fen:a.fen(),lastMove:n})}function ct(e,t){this.onMove(e,t),Object(R.a)(b.b,"Move")}function pt(e,t){this.chess=new d.a(e),this.setState({fen:e,lastMove:t})}function ht(e,t,a){var n=this.state.gamesProcessed+t;return this.state.openingGraph.addPGN(a.pgnStats,a.parsedMoves,a.latestFen,a.playerColor),this.setState({gamesProcessed:n,downloadingGames:(n<e||e>=b.m)&&this.state.downloadingGames}),(n<e||e>=b.m)&&this.state.downloadingGames}function ut(e){return{orig:e.orig,dest:e.dest,brush:this.brushes()[e.level]}}function mt(){var e=this.movesToShow();if(e){var t=e.map(this.moveToShape.bind(this));return this.fillArray(t,25)}return this.fillArray([],25)}function dt(){if(!this.state.openingGraph.hasMoves)return null;var e=this.state.openingGraph.movesForFen(this.chess.fen());return e?e.sort((function(e,t){return t.details.count-e.details.count})):[]}function gt(){return this.state.openingGraph.gameResultsForFen(this.chess.fen())}function ft(e,t){for(var a=e.length;a<t;a++)e.push({orig:"i"+a,dest:"i"+(a+1),brush:this.brushes()[0]});return e}function vt(){this.chess=new d.a,this.setState({fen:this.chess.fen(),lastMove:null})}function bt(){this.state.openingGraph.clear(),this.state.gamesProcessed=0,this.reset()}function Et(e,t){var a=this.state.settings;a[e]=t,this.setState({settings:a})}function yt(e,t,a,n){var s,r,i;n===b.a?(s="Visit old site",i="https://www.openingtree.com/old",r=function(){window.open(i,"_blank")}):(s="Report this",r=this.toggleFeedback(!0)),this.setState({message:e,subMessage:a,errorAction:r,errorActionText:s,messageSeverity:"error"});var o="errorShown";t&&(o=o+":"+t),Object(R.a)(b.d,o,e)}function wt(e,t){this.setState({message:e,messageSeverity:"success"}),Object(R.a)(b.d,"infoShown",t||e)}function kt(){this.setState({message:"",subMessage:""})}function Ct(e){var t=this;return function(){var a=t.state.feedbackOpen;t.closeError(),t.setState({feedbackOpen:!a,diagnosticsDataOpen:e})}}function Ot(e){this.setState({downloadingGames:e})}function Nt(){this.setState({diagnosticsDataOpen:!this.state.diagnosticsDataOpen})}function St(){Object(te.c)("diagnosticsText"),this.showInfo("Copied Diagnostics data")}function jt(e){this.setState({settings:e.settings,openingGraph:e.openingGraph,gamesProcessed:e.gamesProcessed})}function Pt(){return window.innerWidth<=768?"".concat(Math.round(95*window.innerWidth/100),"px"):window.innerWidth<=1024?"".concat(Math.round(40*window.innerWidth/100),"px"):"512px"}function Ft(){return"--------------------\n  ".concat(navigator.userAgent,"\n  -------------------\n  ").concat(JSON.stringify(this.state),"\n  -------------------\n  ")}function Tt(){return"https://www.reddit.com/message/compose/?to=".concat(b.t,"&subject=").concat(this.getSubject(),"&message=%0D%0A%0D%0A%0D%0A").concat(this.getBody())}function xt(){return"mailto:".concat(b.q,"?subject=").concat(this.getSubject(),"&body=%0D%0A%0D%0A%0D%0A").concat(this.getBody())}function Dt(){return this.state.diagnosticsDataOpen?"Possible Openingtree bug":"Feedback on Openingtree"}function Rt(){return this.state.diagnosticsDataOpen?this.getDiagnosticsValue():""}function Mt(e){e.orientation=ot,e.turnColor=nt,e.calcMovable=it,e.onMove=lt,e.onMoveAction=ct,e.autoShapes=mt,e.updateProcessedGames=ht,e.settingsChange=Et,e.reset=vt,e.clear=bt,e.navigateTo=pt,e.playerColor=st,e.fillArray=ft,e.brushes=rt,e.moveToShape=ut,e.movesToShow=dt,e.gameResults=gt,e.showError=yt,e.showInfo=wt,e.closeError=kt,e.toggleFeedback=Ct.bind(e),e.setDownloading=Ot,e.toggleDiagnosticsData=Nt.bind(e),e.copyDiagnostics=St.bind(e),e.importGameState=jt,e.getDiagnosticsValue=Ft,e.getChessboardWidth=Pt,e.getEmailLink=xt,e.getSubject=Dt,e.getBody=Rt.bind(e),e.getRedditLink=Tt}var Gt=a(756),It=a(6),At=a(159),Lt=a.n(At),Bt=a(160),Wt=a.n(Bt),zt=a(351),Ut=a(732),_t=a(7),Jt=a(155),Vt=a.n(Jt),Ht=a(161),Yt=a.n(Ht),qt=a(157),Kt=a.n(qt),Qt=a(158),Xt=a.n(Qt),$t=a(156),Zt=a.n($t),ea=a(5),ta={success:Vt.a,warning:Zt.a,error:Kt.a,info:Xt.a};var aa=Object(_t.a)((function(e){return{success:{backgroundColor:Lt.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:Wt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}))((function(e){var t=e.classes,a=e.className,n=e.message,s=e.onClose,r=e.variant,i=e.subMessage,o=e.action,l=e.actionText,c=e.showReportButton,p=Object(It.a)(e,["classes","className","message","onClose","variant","subMessage","action","actionText","showReportButton"]),u=ta[r];return h.createElement(Ut.a,Object.assign({className:Object(ea.a)(t[r],a),"aria-describedby":"client-snackbar",message:h.createElement("div",null,h.createElement("span",{id:"client-snackbar",className:t.message},h.createElement(u,{className:Object(ea.a)(t.icon,t.iconVariant)}),n),i?h.createElement("div",{className:"smallText"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",i):null),action:[c?h.createElement(ke.a,{key:"report",onClick:o,color:"inherit",size:"small"},l):null,h.createElement(zt.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:s},h.createElement(Yt.a,{className:t.icon}))]},p))})),na=a(748),sa=a(751),ra=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).chess=new d.a,Mt(Object(c.a)(a)),a.state={fen:a.chess.fen(),lastMove:null,gamesProcessed:0,openingGraph:k,settings:{playerName:"",orientation:b.v,playerColor:""},message:"",downloadingGames:!1,feedbackOpen:!1,diagnosticsDataOpen:!1},a.chessboardWidth=a.getChessboardWidth(),a.forBrushes=["paleGrey","paleGreen","green"],a.againstBrushes=["paleRed","paleRed","red"],a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.lastMove?[this.state.lastMove.from,this.state.lastMove.to]:null,t=!!this.state.message;return u.a.createElement("div",{className:"rootView"},u.a.createElement(Z,{toggleFeedback:this.toggleFeedback(!1)}),u.a.createElement(j.a,{className:"mainContainer"},u.a.createElement(P.a,null,u.a.createElement(F.a,{lg:{order:0,size:2},xs:{order:2}},u.a.createElement(M,{fen:this.state.fen,move:this.state.lastMove,onChange:this.navigateTo.bind(this)})),u.a.createElement(F.a,{lg:"6"},u.a.createElement(f.a,{height:this.chessboardWidth,width:this.chessboardWidth,orientation:this.orientation(),turnColor:this.turnColor(),movable:this.calcMovable(),lastMove:e,fen:this.state.fen,onMove:this.onMoveAction.bind(this),drawable:{enabled:!0,visible:!0,autoShapes:this.autoShapes()},style:{margin:"auto"}})),u.a.createElement(F.a,{lg:"4",className:"paddingTop"},u.a.createElement(at,{fen:this.state.fen,gamesProcessed:this.state.gamesProcessed,updateProcessedGames:this.updateProcessedGames.bind(this),settingsChange:this.settingsChange.bind(this),settings:this.state.settings,reset:this.reset.bind(this),clear:this.clear.bind(this),movesToShow:this.movesToShow(),gameResults:this.gameResults(),onMove:this.onMove.bind(this),turnColor:this.turnColor(),showError:this.showError.bind(this),showInfo:this.showInfo.bind(this),setDownloading:this.setDownloading.bind(this),isDownloading:this.state.downloadingGames,openingGraph:this.state.openingGraph,importCallback:this.importGameState.bind(this)})))),u.a.createElement(Gt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:6e3,onClose:this.closeError.bind(this)},u.a.createElement(aa,{onClose:this.closeError.bind(this),variant:this.state.messageSeverity,message:this.state.message,subMessage:this.state.subMessage,showReportButton:"error"===this.state.messageSeverity,action:this.state.errorAction,actionText:this.state.errorActionText})),u.a.createElement(q.a,{isOpen:this.state.feedbackOpen,toggle:this.toggleFeedback(!1)},u.a.createElement(K.a,{toggle:this.toggleFeedback(!1)},"Feedback"),u.a.createElement(na.a,null,"Your feedback is greatly appreciated. Reach out to me for feedback, suggestions, bug report or just a game of chess.",u.a.createElement("ul",null,u.a.createElement("li",null,"Email me: ",u.a.createElement("a",{rel:"noopener noreferrer",href:this.getEmailLink(),target:"_blank"},b.q)),u.a.createElement("li",null,"Message me on reddit ",u.a.createElement("a",{rel:"noopener noreferrer",href:this.getRedditLink(),target:"_blank"},"u/",b.t)),u.a.createElement("li",null,"Message me on lichess: ",u.a.createElement("a",{rel:"noopener noreferrer",href:"https://lichess.org/inbox/".concat(b.s),target:"_blank"},b.s)),u.a.createElement("li",null,"Message me on chess.com: ",u.a.createElement("a",{rel:"noopener noreferrer",href:"https://www.chess.com/messages/compose/".concat(b.o),target:"_blank"},b.o)),u.a.createElement("li",null,"Join my ",u.a.createElement("a",{rel:"noopener noreferrer",href:b.p,target:"_blank"},"discord server")," to chat")),u.a.createElement(ne.a,{control:u.a.createElement(sa.a,{checked:this.state.diagnosticsDataOpen,onChange:this.toggleDiagnosticsData,name:"diagnostics",color:"primary"}),label:"Add diagnostics data to message"}),u.a.createElement(W.a,{isOpen:this.state.diagnosticsDataOpen},u.a.createElement(we.a,{id:"diagnosticsText",label:"Click to copy.",variant:"outlined",className:"fullWidth",value:this.getDiagnosticsValue(),rowsMax:4,onClick:this.copyDiagnostics,multiline:!0}))),u.a.createElement($.a,null,u.a.createElement(T.a,{color:"secondary",onClick:this.toggleFeedback(!1)},"Done"))))}}]),t}(u.a.Component);s.a.render(u.a.createElement(ra,null),document.getElementById("root")),Object(R.b)()},68:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return c}));var n,s=a(14),r=a(3),i=[r.J,r.E,r.D,r.I,r.F,r.G],o=[r.E,r.D,r.I,r.H],l=(n={},Object(s.a)(n,r.J,"Ultrabullet"),Object(s.a)(n,r.E,"Bullet"),Object(s.a)(n,r.D,"Blitz"),Object(s.a)(n,r.I,"Rapid"),Object(s.a)(n,r.F,"Classical"),Object(s.a)(n,r.G,"Correspondence"),Object(s.a)(n,r.H,"Daily"),n);var c={100:800,99:677,98:589,97:538,96:501,95:470,94:444,93:422,92:401,91:383,90:366,89:351,88:336,87:322,86:309,85:296,84:284,83:273,82:262,81:251,80:240,79:230,78:220,77:211,76:202,75:193,74:184,73:175,72:166,71:158,70:149,69:141,68:133,67:125,66:117,65:110,64:102,63:95,62:87,61:80,60:72,59:65,58:57,57:50,56:43,55:36,54:29,53:21,52:14,51:7,50:0,49:-7,48:-14,47:-21,46:-29,45:-36,44:-43,43:-50,42:-57,41:-65,40:-72,39:-80,38:-87,37:-95,36:-102,35:-110,34:-117,33:-125,32:-133,31:-141,30:-149,29:-158,28:-166,27:-175,26:-184,25:-193,24:-202,23:-211,22:-220,21:-230,20:-240,19:-251,18:-262,17:-273,16:-284,15:-296,14:-309,13:-322,12:-336,11:-351,10:-366,9:-383,8:-401,7:-422,6:-444,5:-470,4:-501,3:-538,2:-589,1:-677,0:-800}},76:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(3);function s(e){return e===n.x||e===n.z}function r(e,t){return e!==n.y&&e!==n.A&&!!t}function i(e,t,a,s){return t!==n.z&&t!==n.x?"Only supported for chess.com and lichess":e!==t||a<=0?"You need to analyze games before saving":s?"Action not supported while games are loading":""}function o(e,t,a,s,r){return e===n.y?"".concat(s.name,".").concat(r):t?"".concat(t,"-").concat(a,".").concat(r):"openingtree-exportedgames.".concat(r)}}},[[364,1,2]]]);
//# sourceMappingURL=main.c31e1e79.chunk.js.map